<link rel="stylesheet" href="../static/css/milligram.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/pikaday.min.js" type="text/javascript"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/css/pikaday.min.css" rel="stylesheet" type="text/css" />
 <div class="container">
        <div class='row'><h2>Serach for a free room</h2></div>
        <div class='row'>
                  <div style="padding-bottom: 18px;">Arrival date<span style="color: red;"> *</span><br/>
                  <input type="text" id="arrival_date" name="arrival_date" style="max-width : 250px;" class="form-control"/>
                  </div>
                  <script type="text/javascript">new Pikaday({ field: document.getElementById('arrival_date') });</script>
                  <div style="padding-bottom: 18px;">Departure date<span style="color: red;"> *</span><br/>
                  <input type="text" id="departure_date" name="departure_date" style="max-width : 250px;" class="form-control"/>
                  </div>
                  <script type="text/javascript">new Pikaday({ field: document.getElementById('departure_date') });</script>
                  <div style="padding-bottom: 18px;">Number of beds<span style="color: red;"> *</span><br/>
                  <input type="number" id="beds" name="beds" style="max-width : 250px;" class="form-control"/>
                  </div>
        </div>
        <div class='row'>
              <div style="padding-bottom: 18px;">
	              <input name="Submit" value="Submit" type="submit"/>
	              <input type="button" value="Cancel" onclick="history.back()"/>
              </div>
        </div>
</div>
<script>
function validateData() {
  const today = new Date();
  const from_date = new Date(document.getElementById("arrival_date").value);
  const to_date = new Date(document.getElementById("departure_date").value);
  if (from_date < today) {
     alert('Arrival date must be greater than today!');
     return false;
  }
  if (from_date > to_date) {
     alert('Departure date must be greater or equal to arrival!');
     return false;
  }
  if (isEmpty(document.getElementById('arrival_date').value.trim())) {
    alert('Arrival date is required!');
    return false;
  }
  if (isEmpty(document.getElementById('departure_date').value.trim())) {
    alert('Departure date is required!');
    return false;
  }
  if (isEmpty(document.getElementById('beds').value.trim())) {
    alert('Number ob beds is required!');
    return false;
  }
  return true;
}
function isEmpty(str) { return (str.length === 0 || !str.trim()); }
var submit = document.getElementsByName('Submit')[0];
submit.onclick = function() {
    if (!validateData()) return;
    from_date = document.getElementById("arrival_date").value;
    to_date = document.getElementById("departure_date").value;
    beds = document.getElementById("beds").value;
    location.href='/free_rooms/'+from_date+'/'+to_date+'/'+beds;
}
</script>



